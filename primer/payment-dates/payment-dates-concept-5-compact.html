<!DOCTYPE html>
<html lang="ru" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–Ω—Ü–µ–ø—Ç 5: –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞—Ç –≤—ã–ø–ª–∞—Ç</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .glass-effect {
            background: linear-gradient(135deg, rgba(31, 41, 55, 0.95), rgba(17, 24, 39, 0.95));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(99, 102, 241, 0.2);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 100px rgba(99, 102, 241, 0.1);
        }
        
        .payment-row {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        
        .payment-row::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 3px;
            height: 100%;
            background: linear-gradient(180deg, transparent, var(--row-color, #6366F1), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .payment-row:hover {
            background: linear-gradient(90deg, rgba(99, 102, 241, 0.08), rgba(139, 92, 246, 0.05));
            transform: translateX(2px);
        }
        
        .payment-row:hover::before {
            opacity: 1;
        }
        
        .drag-handle {
            cursor: grab;
            transition: all 0.2s ease;
        }
        
        .drag-handle:hover {
            transform: scale(1.2);
        }
        
        .drag-handle:active {
            cursor: grabbing;
            transform: scale(0.95);
        }
        
        .color-picker-wrapper {
            position: relative;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            overflow: hidden;
            border: 2px solid rgba(75, 85, 99, 0.5);
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        .color-picker-wrapper:hover {
            transform: scale(1.15);
            border-color: rgba(99, 102, 241, 0.8);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
        }
        
        .color-picker-wrapper input[type="color"] {
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            border: none;
            cursor: pointer;
        }
        
        .input-field {
            transition: all 0.2s ease;
        }
        
        .input-field:focus {
            transform: scale(1.02);
            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.3);
        }
        
        .action-button {
            transition: all 0.2s ease;
        }
        
        .action-button:hover {
            transform: translateY(-1px);
        }
        
        .action-button:active {
            transform: translateY(0);
        }
        
        .badge {
            position: relative;
            overflow: hidden;
        }
        
        .badge::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }
        
        .badge:hover::before {
            left: 100%;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .payment-row {
            animation: slideIn 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-900 p-8 min-h-screen flex items-center justify-center">
    
    <!-- –ö–æ–Ω—Ü–µ–ø—Ç 5: –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ -->
    <div class="glass-effect rounded-2xl p-6 max-w-4xl w-full shadow-2xl">
        <!-- Header -->
        <div class="flex items-center justify-between mb-8">
            <div class="flex items-center gap-4">
                <div class="p-3 bg-gradient-to-br from-blue-500/30 to-purple-500/30 rounded-xl shadow-lg">
                    <svg class="w-6 h-6 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
                <div>
                    <h2 class="text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞—Ç –≤—ã–ø–ª–∞—Ç</h2>
                    <p class="text-sm text-gray-400 mt-0.5">
                        <span id="payment-count">3</span> –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç—ã ‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏
                    </p>
                </div>
            </div>
            <button onclick="closeModal()" class="p-2 text-gray-400 hover:text-white hover:bg-red-500/20 rounded-lg transition-all">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>

        <!-- Table -->
        <div class="bg-gradient-to-br from-gray-800/40 to-gray-900/40 rounded-2xl overflow-hidden mb-6 border border-gray-700/50 shadow-xl">
            <!-- Table Header -->
            <div class="grid grid-cols-12 gap-4 px-6 py-4 bg-gradient-to-r from-gray-800/80 to-gray-800/60 border-b border-gray-700/50 text-xs font-semibold text-gray-300 uppercase tracking-wider">
                <div class="col-span-1"></div>
                <div class="col-span-1 text-center">–¶–≤–µ—Ç</div>
                <div class="col-span-2">–ù–∞–∑–≤–∞–Ω–∏–µ</div>
                <div class="col-span-1 text-center">–î–∞—Ç–∞</div>
                <div class="col-span-2">–ü–µ—Ä–∏–æ–¥ —Ä–∞–±–æ—Ç—ã</div>
                <div class="col-span-2">–ú–µ—Å—è—Ü –ø–µ—Ä–∏–æ–¥–∞</div>
                <div class="col-span-1 text-center">–¢–∏–ø</div>
                <div class="col-span-1 text-right">–î–µ–π—Å—Ç–≤–∏—è</div>
            </div>

            <!-- Table Rows -->
            <div id="table-body" class="divide-y divide-gray-700/50">
                <!-- Row 1 -->
                <div class="payment-row grid grid-cols-12 gap-4 px-4 py-3 items-center">
                    <div class="col-span-1 flex justify-center">
                        <button class="drag-handle text-gray-500 hover:text-gray-300">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"/>
                            </svg>
                        </button>
                    </div>
                    <div class="col-span-1 flex justify-center">
                        <div class="w-6 h-6 rounded-full bg-green-500 border-2 border-gray-700"></div>
                    </div>
                    <div class="col-span-3">
                        <input type="text" value="–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞" class="w-full bg-transparent text-white text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1">
                    </div>
                    <div class="col-span-2 text-center">
                        <input type="number" value="25" min="1" max="31" class="w-16 bg-gray-700 text-white text-sm text-center rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="col-span-3 flex items-center gap-2">
                        <input type="number" value="1" min="1" max="31" class="w-12 bg-gray-700 text-white text-xs text-center rounded px-1 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <span class="text-gray-500 text-xs">‚Äî</span>
                        <input type="number" value="15" min="1" max="31" class="w-12 bg-gray-700 text-white text-xs text-center rounded px-1 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="col-span-1 text-center">
                        <span class="px-2 py-1 bg-blue-500/20 text-blue-400 rounded text-xs">–ú–µ—Å—è—Ü</span>
                    </div>
                    <div class="col-span-1 flex justify-end gap-1">
                        <button class="p-1.5 hover:bg-gray-700 rounded transition-colors">
                            <svg class="w-3.5 h-3.5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                        </button>
                        <button class="p-1.5 hover:bg-red-500/20 rounded transition-colors">
                            <svg class="w-3.5 h-3.5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Row 2 -->
                <div class="payment-row grid grid-cols-12 gap-4 px-4 py-3 items-center">
                    <div class="col-span-1 flex justify-center">
                        <button class="drag-handle text-gray-500 hover:text-gray-300">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"/>
                            </svg>
                        </button>
                    </div>
                    <div class="col-span-1 flex justify-center">
                        <div class="w-6 h-6 rounded-full bg-blue-500 border-2 border-gray-700"></div>
                    </div>
                    <div class="col-span-3">
                        <input type="text" value="–ê–≤–∞–Ω—Å" class="w-full bg-transparent text-white text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1">
                    </div>
                    <div class="col-span-2 text-center">
                        <input type="number" value="10" min="1" max="31" class="w-16 bg-gray-700 text-white text-sm text-center rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="col-span-3 flex items-center gap-2">
                        <input type="number" value="16" min="1" max="31" class="w-12 bg-gray-700 text-white text-xs text-center rounded px-1 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <span class="text-gray-500 text-xs">‚Äî</span>
                        <input type="number" value="31" min="1" max="31" class="w-12 bg-gray-700 text-white text-xs text-center rounded px-1 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="col-span-1 text-center">
                        <span class="px-2 py-1 bg-blue-500/20 text-blue-400 rounded text-xs">–ú–µ—Å—è—Ü</span>
                    </div>
                    <div class="col-span-1 flex justify-end gap-1">
                        <button class="p-1.5 hover:bg-gray-700 rounded transition-colors">
                            <svg class="w-3.5 h-3.5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                        </button>
                        <button class="p-1.5 hover:bg-red-500/20 rounded transition-colors">
                            <svg class="w-3.5 h-3.5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Row 3 -->
                <div class="payment-row grid grid-cols-12 gap-4 px-4 py-3 items-center">
                    <div class="col-span-1 flex justify-center">
                        <button class="drag-handle text-gray-500 hover:text-gray-300">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"/>
                            </svg>
                        </button>
                    </div>
                    <div class="col-span-1 flex justify-center">
                        <div class="w-6 h-6 rounded-full bg-purple-500 border-2 border-gray-700"></div>
                    </div>
                    <div class="col-span-3">
                        <input type="text" value="–§—Ä–∏–ª–∞–Ω—Å –ø—Ä–æ–µ–∫—Ç" class="w-full bg-transparent text-white text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1">
                    </div>
                    <div class="col-span-2 text-center">
                        <input type="text" value="05.12" placeholder="–î–î.–ú–ú" class="w-16 bg-gray-700 text-white text-sm text-center rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="col-span-3 flex items-center gap-2">
                        <span class="text-xs text-gray-500">–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –¥–∞—Ç–∞</span>
                    </div>
                    <div class="col-span-1 text-center">
                        <span class="px-2 py-1 bg-purple-500/20 text-purple-400 rounded text-xs">–†–∞–∑–æ–≤–æ</span>
                    </div>
                    <div class="col-span-1 flex justify-end gap-1">
                        <button class="p-1.5 hover:bg-gray-700 rounded transition-colors">
                            <svg class="w-3.5 h-3.5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                        </button>
                        <button class="p-1.5 hover:bg-red-500/20 rounded transition-colors">
                            <svg class="w-3.5 h-3.5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Button -->
        <button onclick="addPayment()" class="w-full py-3.5 px-6 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-xl text-sm font-semibold transition-all flex items-center justify-center gap-3 mb-6 shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-[0.98]">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
            </svg>
            –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –≤—ã–ø–ª–∞—Ç—É
        </button>

        <!-- Footer -->
        <div class="flex items-center justify-between pt-6 border-t border-gray-700/50">
            <div class="flex items-center gap-3 text-sm text-gray-400">
                <div class="p-2 bg-blue-500/10 rounded-lg">
                    <svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
                <span>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞</span>
            </div>
            <div class="flex gap-3">
                <button onclick="closeModal()" class="py-2.5 px-6 bg-gray-700/50 hover:bg-gray-600 text-white rounded-xl text-sm font-semibold transition-all border border-gray-600/50 hover:border-gray-500">
                    –û—Ç–º–µ–Ω–∞
                </button>
                <button onclick="saveAll()" class="py-2.5 px-6 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl text-sm font-semibold transition-all shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-[0.98]">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ
                </button>
            </div>
        </div>
    </div>

    <script>
        let payments = [
            { id: 1, name: '–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞', day: 25, periodStart: 1, periodEnd: 15, periodMonth: 'current', color: '#10B981', type: 'monthly' },
            { id: 2, name: '–ê–≤–∞–Ω—Å', day: 10, periodStart: 16, periodEnd: 31, periodMonth: 'previous', color: '#3B82F6', type: 'monthly' },
            { id: 3, name: '–§—Ä–∏–ª–∞–Ω—Å –ø—Ä–æ–µ–∫—Ç', day: 5, customDate: '05.12', periodMonth: 'previous', color: '#8B5CF6', type: 'once' }
        ];
        
        function renderTable() {
            const tbody = document.getElementById('table-body');
            tbody.innerHTML = payments.map(payment => `
                <div class="payment-row grid grid-cols-12 gap-4 px-6 py-4 items-center" style="--row-color: ${payment.color}">
                    <div class="col-span-1 flex justify-center">
                        <button class="drag-handle text-gray-500 hover:text-blue-400">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"/>
                            </svg>
                        </button>
                    </div>
                    <div class="col-span-1 flex justify-center">
                        <div class="color-picker-wrapper" style="background: ${payment.color}">
                            <input type="color" value="${payment.color}" onchange="updateColor(${payment.id}, this.value)">
                        </div>
                    </div>
                    <div class="col-span-2">
                        <input type="text" value="${payment.name}" onchange="updateName(${payment.id}, this.value)" class="input-field w-full bg-gray-700/50 text-white text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-lg px-3 py-2 border border-gray-600/50">
                    </div>
                    <div class="col-span-1 text-center">
                        <input type="number" value="${payment.day}" min="1" max="31" onchange="updateDay(${payment.id}, this.value)" class="input-field w-full bg-gray-700/50 text-white text-sm text-center rounded-lg px-2 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold border border-gray-600/50">
                    </div>
                    <div class="col-span-2 flex items-center gap-2">
                        <input type="number" value="${payment.periodStart}" min="1" max="31" onchange="updatePeriodStart(${payment.id}, this.value)" class="input-field w-14 bg-gray-700/50 text-white text-xs text-center rounded-lg px-2 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 border border-gray-600/50">
                        <span class="text-gray-500 text-sm font-bold">‚Üí</span>
                        <input type="number" value="${payment.periodEnd}" min="1" max="31" onchange="updatePeriodEnd(${payment.id}, this.value)" class="input-field w-14 bg-gray-700/50 text-white text-xs text-center rounded-lg px-2 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 border border-gray-600/50">
                    </div>
                    <div class="col-span-2">
                        <select onchange="updatePeriodMonth(${payment.id}, this.value)" class="input-field w-full bg-gray-700/50 text-white text-xs rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer border border-gray-600/50">
                            <option value="current" ${payment.periodMonth === 'current' ? 'selected' : ''}>üóìÔ∏è –¢–µ–∫—É—â–∏–π</option>
                            <option value="previous" ${payment.periodMonth === 'previous' ? 'selected' : ''}>üìÖ –ü—Ä–µ–¥—ã–¥—É—â–∏–π</option>
                        </select>
                    </div>
                    <div class="col-span-1 text-center">
                        <span class="badge inline-block px-3 py-1.5 rounded-lg text-xs font-semibold" style="background: linear-gradient(135deg, ${payment.color}30, ${payment.color}20); color: ${payment.color}; border: 1px solid ${payment.color}40;">
                            ${payment.type === 'monthly' ? 'üîÑ –ú–µ—Å—è—Ü' : '‚ö° –†–∞–∑–æ–≤–æ'}
                        </span>
                    </div>
                    <div class="col-span-1 flex justify-end gap-2">
                        <button onclick="savePayment(${payment.id})" class="action-button p-2 hover:bg-green-500/20 rounded-lg transition-all" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å">
                            <svg class="w-4 h-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                        </button>
                        <button onclick="deletePayment(${payment.id})" class="action-button p-2 hover:bg-red-500/20 rounded-lg transition-all" title="–£–¥–∞–ª–∏—Ç—å">
                            <svg class="w-4 h-4 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                        </button>
                    </div>
                </div>
            `).join('');
            updatePaymentCount();
        }
        
        function updatePaymentCount() {
            const countElement = document.getElementById('payment-count');
            if (countElement) {
                countElement.textContent = payments.length;
            }
        }
        
        function updateName(id, value) { const p = payments.find(p => p.id === id); if (p) p.name = value; }
        function updateDay(id, value) { const p = payments.find(p => p.id === id); if (p) p.day = parseInt(value) || 1; }
        function updateColor(id, value) { const p = payments.find(p => p.id === id); if (p) { p.color = value; renderTable(); } }
        function updatePeriodStart(id, value) { const p = payments.find(p => p.id === id); if (p) p.periodStart = parseInt(value) || 1; }
        function updatePeriodEnd(id, value) { const p = payments.find(p => p.id === id); if (p) p.periodEnd = parseInt(value) || 31; }
        function updatePeriodMonth(id, value) { const p = payments.find(p => p.id === id); if (p) p.periodMonth = value; }
        
        function savePayment(id) {
            showNotification('–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã', 'success');
        }
        
        function deletePayment(id) {
            if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –≤—ã–ø–ª–∞—Ç—É?')) {
                payments = payments.filter(p => p.id !== id);
                renderTable();
                showNotification('–í—ã–ø–ª–∞—Ç–∞ —É–¥–∞–ª–µ–Ω–∞', 'success');
            }
        }
        
        function addPayment() {
            const newId = Math.max(...payments.map(p => p.id), 0) + 1;
            payments.push({ id: newId, name: '–ù–æ–≤–∞—è –≤—ã–ø–ª–∞—Ç–∞', day: 1, periodStart: 1, periodEnd: 15, periodMonth: 'current', color: '#6366F1', type: 'monthly' });
            renderTable();
            showNotification('–í—ã–ø–ª–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞', 'success');
        }
        
        function closeModal() { if (confirm('–ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ?')) window.close(); }
        function saveAll() { console.log('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ:', payments); showNotification('–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã', 'success'); }
        
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg text-white font-medium shadow-lg z-50 ${type === 'success' ? 'bg-green-600' : type === 'error' ? 'bg-red-600' : 'bg-blue-600'}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => { notification.style.opacity = '0'; notification.style.transition = 'opacity 0.3s'; setTimeout(() => notification.remove(), 300); }, 2000);
        }
        
        document.addEventListener('DOMContentLoaded', renderTable);
    </script>

</body>
</html>
