import { useState } from 'react';

/**
 * üîî –•—É–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
 * 
 * üéì –ü–û–Ø–°–ù–ï–ù–ò–ï –î–õ–Ø –ù–ê–ß–ò–ù–ê–Æ–©–ò–•:
 * 
 * –≠—Ç–æ—Ç —Ö—É–∫ —É–ø—Ä–æ—â–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π.
 * –í–º–µ—Å—Ç–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤—Ä—É—á–Ω—É—é, —Ö—É–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–æ—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
 * –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –Ω—É–∂–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π.
 * 
 * –£–ø—Ä–æ—â–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ConfirmModal –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞.
 * 
 * @returns {Object} –æ–±—ä–µ–∫—Ç —Å –º–µ—Ç–æ–¥–∞–º–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
 * @returns {boolean} returns.isOpen - –æ—Ç–∫—Ä—ã—Ç–æ –ª–∏ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
 * @returns {Function} returns.openConfirm - —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
 * @param {Object} config - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
 * @param {string} config.title - –∑–∞–≥–æ–ª–æ–≤–æ–∫ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
 * @param {string} config.message - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
 * @param {Function} config.onConfirm - —Ñ—É–Ω–∫—Ü–∏—è, –≤—ã–∑—ã–≤–∞–µ–º–∞—è –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏
 * @param {string} [config.confirmText='–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å'] - —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
 * @param {string} [config.cancelText='–û—Ç–º–µ–Ω–∞'] - —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –æ—Ç–º–µ–Ω—ã
 * @returns {Function} returns.closeConfirm - —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
 * @returns {Object} returns.confirmConfig - –≥–æ—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ ConfirmModal
 * 
 * @example
 * function DeleteButton({ entryId, onDelete }) {
 *   const { openConfirm, confirmConfig } = useConfirmModal();
 *   
 *   const handleClick = () => {
 *     openConfirm({
 *       title: '–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å?',
 *       message: '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–ø–∏—Å—å?',
 *       onConfirm: () => onDelete(entryId),
 *       confirmText: '–£–¥–∞–ª–∏—Ç—å',
 *       cancelText: '–û—Ç–º–µ–Ω–∞'
 *     });
 *   };
 *   
 *   return (
 *     <>
 *       <button onClick={handleClick}>–£–¥–∞–ª–∏—Ç—å</button>
 *       <ConfirmModal {...confirmConfig} />
 *     </>
 *   );
 * }
 */
export function useConfirmModal() {
  const [isOpen, setIsOpen] = useState(false);
  const [config, setConfig] = useState({
    title: '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ',
    message: '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ?',
    onConfirm: () => {},
    confirmText: '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å',
    cancelText: '–û—Ç–º–µ–Ω–∞'
  });

  const openConfirm = (newConfig) => {
    setConfig({
      title: config.title,
      message: config.message,
      onConfirm: () => {},
      confirmText: config.confirmText,
      cancelText: config.cancelText,
      ...newConfig
    });
    setIsOpen(true);
  };

  const closeConfirm = () => {
    setIsOpen(false);
  };

  const handleConfirm = () => {
    config.onConfirm?.();
    closeConfirm();
  };

  return {
    isOpen,
    openConfirm,
    closeConfirm,
    confirmConfig: {
      isOpen,
      onClose: closeConfirm,
      onConfirm: handleConfirm,
      ...config
    }
  };
}

