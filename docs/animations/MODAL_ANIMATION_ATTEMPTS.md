# üìã –ò—Å—Ç–æ—Ä–∏—è –ø–æ–ø—ã—Ç–æ–∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞

## üìÖ –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: 2025-01-05

## üéØ –¶–µ–ª—å

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–ª–∞–≤–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ `AboutModal` –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ (–ò—Å—Ç–æ—Ä–∏—è, –ü–ª–∞–Ω—ã, –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –ü–æ–¥–¥–µ—Ä–∂–∫–∞).

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –ö–æ–Ω—Ç–µ–∫—Å—Ç

- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ `AboutModal` –∏–º–µ–µ—Ç 4 –≤–∫–ª–∞–¥–∫–∏ —Å —Ä–∞–∑–Ω—ã–º –æ–±—ä–µ–º–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–æ–∫ –≤—ã—Å–æ—Ç–∞ –æ–∫–Ω–∞ —Ä–µ–∑–∫–æ –º–µ–Ω—è–µ—Ç—Å—è
- –í–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–π –≤–∫–ª–∞–¥–∫–∏ –µ—Å—Ç—å –∞–∫–∫–æ—Ä–¥–µ–æ–Ω—ã (framer-motion), –∫–æ—Ç–æ—Ä—ã–µ —Ç–∞–∫–∂–µ –º–µ–Ω—è—é—Ç –≤—ã—Å–æ—Ç—É
- –ù—É–∂–Ω–∞ –ø–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–∞–º–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- React –æ–±–Ω–æ–≤–ª—è–µ—Ç DOM –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- CSS transition –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `height: auto`
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑–º–µ—Ä—è—Ç—å –≤—ã—Å–æ—Ç—É –¥–æ –∏ –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∞
- –ê–∫–∫–æ—Ä–¥–µ–æ–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç framer-motion —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π

## üìù –ü–æ–ø—ã—Ç–∫–∞ 1: –ë–∞–∑–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Å useEffect

**–ü–µ—Ä–∏–æ–¥:** –ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞  
**–ü–æ–¥—Ö–æ–¥:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useState` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã –∏ `useEffect` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–º–µ–Ω—ã –≤–∫–ª–∞–¥–∫–∏

**–ö–æ–¥:**

```javascript
const [contentHeight, setContentHeight] = useState('auto')

useEffect(() => {
  if (contentRef.current && isOpen) {
    const currentHeight = contentRef.current.scrollHeight
    setContentHeight(`${currentHeight}px`)

    requestAnimationFrame(() => {
      if (contentRef.current) {
        const newHeight = contentRef.current.scrollHeight
        setContentHeight(`${newHeight}px`)

        setTimeout(() => {
          setContentHeight('auto')
        }, 300)
      }
    })
  }
}, [activeTab, isOpen])
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ùå –ù–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ  
**–ü—Ä–∏—á–∏–Ω–∞:** React –æ–±–Ω–æ–≤–ª—è–µ—Ç DOM –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–æ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

---

## üìù –ü–æ–ø—ã—Ç–∫–∞ 2: –î–≤–æ–π–Ω–æ–π requestAnimationFrame

**–ü–µ—Ä–∏–æ–¥:** –í—Ç–æ—Ä–∞—è –ø–æ–ø—ã—Ç–∫–∞  
**–ü–æ–¥—Ö–æ–¥:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–≤–æ–π–Ω–æ–≥–æ `requestAnimationFrame` –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–Ω–¥–µ—Ä–∞

**–ö–æ–¥:**

```javascript
useEffect(() => {
  if (!contentRef.current || !isOpen) return

  const currentHeight = contentRef.current.scrollHeight
  setContentHeight(`${currentHeight}px`)

  requestAnimationFrame(() => {
    requestAnimationFrame(() => {
      setTimeout(() => {
        if (contentRef.current) {
          const newHeight = contentRef.current.scrollHeight
          if (Math.abs(newHeight - currentHeight) > 1) {
            setContentHeight(`${newHeight}px`)
          }
          setTimeout(() => {
            setContentHeight('auto')
          }, 300)
        }
      }, 10)
    })
  })
}, [activeTab, isOpen])
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ùå –ù–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ  
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –¥–≤–æ–π–Ω–æ–π RAF, –∏–∑–º–µ—Ä–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–∞–Ω—å—à–µ, —á–µ–º React –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–∏—Ç DOM

---

## üìù –ü–æ–ø—ã—Ç–∫–∞ 3: useLayoutEffect —Å –¥–≤–æ–π–Ω—ã–º RAF

**–ü–µ—Ä–∏–æ–¥:** –¢—Ä–µ—Ç—å—è –ø–æ–ø—ã—Ç–∫–∞  
**–ü–æ–¥—Ö–æ–¥:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useLayoutEffect` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã

**–ö–æ–¥:**

```javascript
useLayoutEffect(() => {
  if (!isOpen || !contentRef.current) return

  const currentHeight = contentRef.current.scrollHeight
  const savedHeight = heightRef.current || currentHeight
  heightRef.current = currentHeight

  setContentHeight(`${savedHeight}px`)
  setIsAnimating(true)

  const rafId1 = requestAnimationFrame(() => {
    const rafId2 = requestAnimationFrame(() => {
      setTimeout(() => {
        if (!contentRef.current) return

        const newHeight = contentRef.current.scrollHeight
        if (Math.abs(newHeight - savedHeight) > 5) {
          heightRef.current = newHeight
          setContentHeight(`${newHeight}px`)

          setTimeout(() => {
            setContentHeight('auto')
            setIsAnimating(false)
          }, 300)
        } else {
          setContentHeight('auto')
          setIsAnimating(false)
        }
      }, 16)
    })
  })

  return () => {
    cancelAnimationFrame(rafId1)
  }
}, [activeTab, isOpen])
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç  
**–ü—Ä–∏—á–∏–Ω–∞:** –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞, –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ —É–º–µ–Ω—å—à–µ–Ω–∏–∏

---

## üìù –ü–æ–ø—ã—Ç–∫–∞ 4: –í–∞—Ä–∏–∞–Ω—Ç 5 - –ü–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ (fade-smooth)

**–ü–µ—Ä–∏–æ–¥:** –ß–µ—Ç–≤–µ—Ä—Ç–∞—è –ø–æ–ø—ã—Ç–∫–∞  
**–ü–æ–¥—Ö–æ–¥:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ 5 –∏–∑ primer - –ø–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –∑–∞—Ç–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã, –∑–∞—Ç–µ–º –ø–æ—è–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useLayoutEffect` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è
- –¢—Ä–æ–π–Ω–æ–π RAF –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞
- –ó–∞—Ç—É—Ö–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (fade-out) –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –≤—ã—Å–æ—Ç—ã
- –ü–æ—è–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (fade-in) –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã
- –ò–∑–æ–ª—è—Ü–∏—è –æ—Ç –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–æ–≤ (—Ç–æ–ª—å–∫–æ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ `activeTab`)

**–ö–æ–¥:**

```javascript
// –°–æ—Å—Ç–æ—è–Ω–∏—è
const contentRef = useRef(null)
const heightRef = useRef(null)
const previousTabRef = useRef(activeTab)
const isAnimatingRef = useRef(false)
const animationTimersRef = useRef([])
const [contentHeight, setContentHeight] = useState('auto')
const [isFadingOut, setIsFadingOut] = useState(false)
const [isAnimating, setIsAnimating] = useState(false)

// useLayoutEffect —Å –ø–æ–ª–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
useLayoutEffect(() => {
  // –û—á–∏—Å—Ç–∫–∞ —Ç–∞–π–º–µ—Ä–æ–≤
  animationTimersRef.current.forEach(timer => {
    if (typeof timer === 'number') {
      clearTimeout(timer)
    } else {
      cancelAnimationFrame(timer)
    }
  })
  animationTimersRef.current = []

  if (!isOpen || !contentRef.current) {
    previousTabRef.current = activeTab
    isAnimatingRef.current = false
    setIsAnimating(false)
    setContentHeight('auto')
    setIsFadingOut(false)
    return
  }

  if (activeTab === previousTabRef.current && previousTabRef.current !== null) {
    return
  }

  if (isAnimatingRef.current) {
    isAnimatingRef.current = false
    setIsAnimating(false)
    setContentHeight('auto')
    setIsFadingOut(false)
  }

  const contentEl = contentRef.current
  const currentHeight = contentEl.scrollHeight
  const savedHeight = heightRef.current || currentHeight

  isAnimatingRef.current = true
  setIsAnimating(true)
  heightRef.current = currentHeight

  setContentHeight(`${savedHeight}px`)
  setIsFadingOut(true)

  const fadeOutTimer = setTimeout(() => {
    const rafId1 = requestAnimationFrame(() => {
      const rafId2 = requestAnimationFrame(() => {
        const rafId3 = requestAnimationFrame(() => {
          const measureTimer = setTimeout(() => {
            if (!contentRef.current || !isAnimatingRef.current) {
              isAnimatingRef.current = false
              setIsAnimating(false)
              return
            }

            const newHeight = contentRef.current.scrollHeight

            if (Math.abs(newHeight - savedHeight) > 5) {
              heightRef.current = newHeight
              setContentHeight(`${newHeight}px`)

              const fadeInTimer = setTimeout(() => {
                if (!isAnimatingRef.current) return

                setIsFadingOut(false)

                const autoTimer = setTimeout(() => {
                  if (!isAnimatingRef.current) return

                  setContentHeight('auto')
                  isAnimatingRef.current = false
                  setIsAnimating(false)
                  previousTabRef.current = activeTab
                  animationTimersRef.current = []
                }, 350)

                animationTimersRef.current.push(autoTimer)
              }, 50)

              animationTimersRef.current.push(fadeInTimer)
            } else {
              setIsFadingOut(false)
              setContentHeight('auto')
              isAnimatingRef.current = false
              setIsAnimating(false)
              previousTabRef.current = activeTab
              animationTimersRef.current = []
            }
          }, 30)

          animationTimersRef.current.push(measureTimer)
        })

        animationTimersRef.current.push(rafId3)
      })

      animationTimersRef.current.push(rafId2)
    })

    animationTimersRef.current.push(rafId1)
  }, 250)

  animationTimersRef.current.push(fadeOutTimer)

  return () => {
    animationTimersRef.current.forEach(timer => {
      if (typeof timer === 'number') {
        clearTimeout(timer)
      } else {
        cancelAnimationFrame(timer)
      }
    })
    animationTimersRef.current = []
    isAnimatingRef.current = false
    setIsAnimating(false)
  }
}, [activeTab, isOpen])
```

**CSS:**

```css
.modal-content-size-animation {
  position: relative;
}

.content-wrapper-fade {
  transition: opacity 0.25s ease-in-out;
}

.content-wrapper-fade.fade-out {
  opacity: 0;
  pointer-events: none;
}

.content-wrapper-fade.fade-in {
  opacity: 1;
  pointer-events: auto;
}

.content-wrapper-fade.fade-in > div:first-child {
  animation: fadeInUp 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ö†Ô∏è –†–∞–±–æ—Ç–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω–æ  
**–ü—Ä–æ–±–ª–µ–º—ã:**

1. ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
2. ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ —É–º–µ–Ω—å—à–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
3. ‚ö†Ô∏è –î–µ—Ä–≥–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏/–∑–∞–∫—Ä—ã—Ç–∏–∏ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–æ–≤
4. ‚ö†Ô∏è –ù–µ –≤—Å–µ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –≤–æ–∑–º–æ–∂–Ω—ã —Ä—ã–≤–∫–∏

**–ü—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º:**

1. **–£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞:** Transition –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏ —É–º–µ–Ω—å—à–µ–Ω–∏–∏ –≤—ã—Å–æ—Ç—ã
2. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–∞–º–∏:** –ê–Ω–∏–º–∞—Ü–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–æ–≤ –≤–Ω—É—Ç—Ä–∏ –≤–∫–ª–∞–¥–æ–∫
3. **Timing issues:** –¢—Ä–æ–π–Ω–æ–π RAF –∏ –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–æ–∑–¥–∞—é—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å

---

## üî¨ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –Ω–µ –∞–Ω–∏–º–∏—Ä—É–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:**

- Transition –∞–∫—Ç–∏–≤–µ–Ω —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ `isAnimating === true`
- –ü—Ä–∏ —É–º–µ–Ω—å—à–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ transition –º–æ–∂–µ—Ç –Ω–µ —É—Å–ø–µ—Ç—å –ø—Ä–∏–º–µ–Ω–∏—Ç—å—Å—è
- –ù—É–∂–Ω–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ transition –î–û –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã

**–†–µ—à–µ–Ω–∏–µ (–ø–æ–ø—ã—Ç–∫–∞):**

- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `isAnimating` –î–û –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `requestAnimationFrame` –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–æ–≤–æ–π –≤—ã—Å–æ—Ç—ã
- –£–ø—Ä–æ—â–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è transition (–∞–∫—Ç–∏–≤–µ–Ω –≤—Å–µ–≥–¥–∞ –∫–æ–≥–¥–∞ `contentHeight !== 'auto'`)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ùå –ù–µ –ø–æ–º–æ–≥–ª–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–∞–º–∏

**–ü—Ä–∏—á–∏–Ω–∞:**

- –ê–∫–∫–æ—Ä–¥–µ–æ–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç framer-motion —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π `height: auto`
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–æ–≤ –º–µ–Ω—è–µ—Ç –≤—ã—Å–æ—Ç—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- `useLayoutEffect` —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é `[activeTab, isOpen]` –Ω–µ –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω—ã, –Ω–æ –º–æ–∂–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–∑–º–µ—Ä—è—Ç—å –≤—ã—Å–æ—Ç—É

**–†–µ—à–µ–Ω–∏–µ (–ø–æ–ø—ã—Ç–∫–∞):**

- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞ `isAnimatingRef` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è `activeTab` –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∞–Ω–∏–º–∞—Ü–∏–∏
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π `expandedVersions`, `expandedSections`, `expandedTechs`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ –ø–æ–º–æ–≥–ª–æ, –Ω–æ –≤—Å–µ –µ—â–µ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –†—ã–≤–∫–∏ –∏ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å

**–ü—Ä–∏—á–∏–Ω–∞:**

- –°–ª–æ–∂–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ —Ç–∞–π–º–µ—Ä–æ–≤ –∏ RAF
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –í–æ–∑–º–æ–∂–Ω—ã–µ race conditions

**–†–µ—à–µ–Ω–∏–µ (–ø–æ–ø—ã—Ç–∫–∞):**

- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ç–∞–π–º–µ—Ä–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–∞–π–º–µ—Ä–æ–≤
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π cleanup –≤ return —Ñ—É–Ω–∫—Ü–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ö†Ô∏è –£–ª—É—á—à–∏–ª–æ —Å–∏—Ç—É–∞—Ü–∏—é, –Ω–æ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é

---

## üí° –í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **CSS transition —Å `height: auto`** - –±—Ä–∞—É–∑–µ—Ä—ã –Ω–µ –º–æ–≥—É—Ç –∞–Ω–∏–º–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç/–∫ `auto`
2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è React –∏ DOM** - –∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–æ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞
3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å framer-motion** - –∞–∫–∫–æ—Ä–¥–µ–æ–Ω—ã –∏–º–µ—é—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é
4. **Timing issues** - —Å–ª–æ–∂–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ —Ç–∞–π–º–µ—Ä–æ–≤ —Å–æ–∑–¥–∞–µ—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –ø–æ–¥—Ö–æ–¥** - –º–µ–Ω—å—à–µ —Ç–∞–π–º–µ—Ä–æ–≤, –±–æ–ª—å—à–µ –ø—Ä—è–º—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
2. **–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ transition** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `requestAnimationFrame` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ transition –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –≤—ã—Å–æ—Ç—ã
3. **–ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –æ—Ç –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–æ–≤** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ResizeObserver` –∏–ª–∏ –¥—Ä—É–≥–æ–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–∫–ª–∞–¥–æ–∫
4. **–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã** - –≤–æ–∑–º–æ–∂–Ω–æ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `framer-motion` –¥–ª—è –≤—Å–µ–π –∞–Ω–∏–º–∞—Ü–∏–∏ –∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Ç–∏–ø–∞ `react-spring`

---

## üìö –°—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ—à–µ–Ω–∏—è

- Primer: `time-tracker/primer/modal-size-animation/modal-size-variant-5-fade-smooth.html`
- –ü—Ä–æ–±–ª–µ–º–∞: `time-tracker/problems/MODAL_TABS_ANIMATION_ISSUE.md`
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `time-tracker/docs/ANIMATION_IMPLEMENTATION_COMPLETE.md`

---

**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

---

## üìù –ü–æ–ø—ã—Ç–∫–∞ 6: CSS max-height —Å fade-out/fade-in (–í–∞—Ä–∏–∞–Ω—Ç 1)

**–ü–µ—Ä–∏–æ–¥:** 2025-01-05  
**–ü–æ–¥—Ö–æ–¥:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `max-height` –≤–º–µ—Å—Ç–æ `height` –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞

**–ö–æ–¥:**

```javascript
const [maxHeight, setMaxHeight] = useState(2000)
const [isFadingOut, setIsFadingOut] = useState(false)

useLayoutEffect(() => {
  if (!contentRef.current || activeTab === previousTabRef.current) return

  const currentHeight = contentRef.current.scrollHeight
  setMaxHeight(currentHeight)
  setIsFadingOut(true)

  setTimeout(() => {
    requestAnimationFrame(() => {
      requestAnimationFrame(() => {
        const newHeight = contentRef.current.scrollHeight
        requestAnimationFrame(() => {
          setMaxHeight(newHeight)
          setTimeout(() => setIsFadingOut(false), 50)
        })
      })
    })
  }, 250)
}, [activeTab, isOpen])
```

**CSS:**

```css
.modal-content-size-animation {
  transition: max-height 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ —É–º–µ–Ω—å—à–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞  
**–ü—Ä–∏—á–∏–Ω–∞ –Ω–µ—É–¥–∞—á–∏:**

- CSS `max-height` transition –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏ —É–º–µ–Ω—å—à–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞
- –ö–æ–≥–¥–∞ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `max-height` –º–µ–Ω—å—à–µ —Ç–µ–∫—É—â–µ–≥–æ, –±—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ—Ç –Ω–µ –∞–Ω–∏–º–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥
- –ü—Ä–æ–±–ª–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π `max-height` –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º transition

**–í—ã–≤–æ–¥:** `max-height` –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã. –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `height` —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ –ø–∏–∫—Å–µ–ª—è—Ö, –∫–∞–∫ –≤ primer `modal-size-variant-5-fade-smooth.html`.
